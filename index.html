<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BloodConnect - Connect Blood Donors with Recipients</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="icon" href="data:,">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body class="bg-gray-50">
    <!-- Header/Navigation -->
    <header class="bg-white shadow-sm">
        <nav class="container mx-auto px-4 py-3 flex justify-between items-center">
            <a href="index.html" class="text-red-600 font-bold text-2xl">BloodConnect</a>

            <div class="hidden md:flex space-x-6">
                <a href="index.html" class="text-gray-700 hover:text-red-600">Home</a>
                <a href="donors.html" class="text-gray-700 hover:text-red-600">Donors</a>
                <a href="requests.html" class="text-gray-700 hover:text-red-600">Requests</a>
                <a href="donation-centers.html" class="text-gray-700 hover:text-red-600">Donation Centers</a>
                <a href="about.html" class="text-gray-700 hover:text-red-600">About</a>
                <a href="faq.html" class="text-gray-700 hover:text-red-600">FAQ</a>
            </div>

            <div class="flex items-center space-x-4">
                <!-- Auth buttons - will be toggled by JS -->
                <div id="auth-buttons">
                    <a href="login.html" class="text-gray-700 hover:text-red-600">Login</a>
                    <a href="register.html"
                        class="ml-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">Register</a>
                </div>

                <!-- User menu - hidden by default, shown when logged in -->
                <div id="user-menu" class="hidden relative">
                    <button id="user-menu-button" class="flex items-center text-gray-700 hover:text-red-600">
                        <span id="user-name">User</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-1" viewBox="0 0 20 20"
                            fill="currentColor">
                            <path fill-rule="evenodd"
                                d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                clip-rule="evenodd" />
                        </svg>
                    </button>

                    <div id="user-dropdown"
                        class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10">
                        <a href="profile.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Profile</a>
                        <a href="#" id="logout-button"
                            class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Logout</a>
                    </div>
                </div>
            </div>

            <!-- Mobile menu button -->
            <button id="mobile-menu-button" class="md:hidden text-gray-700">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>
        </nav>

        <!-- Mobile menu - hidden by default -->
        <div id="mobile-menu" class="hidden md:hidden px-4 py-2 bg-white">
            <a href="index.html" class="block py-2 text-gray-700">Home</a>
            <a href="donors.html" class="block py-2 text-gray-700">Donors</a>
            <a href="requests.html" class="block py-2 text-gray-700">Requests</a>
            <a href="#" class="block py-2 text-gray-700">Donation Centers</a>
            <a href="about.html" class="block py-2 text-gray-700">About</a>
            <a href="faq.html" class="block py-2 text-gray-700">FAQ</a>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="bg-red-600 text-white py-40 bg-cover bg-center relative min-h-[600px] flex items-center"
        style="background-image: url('./assets/images/mainpage.jpg');">
        <!-- Add an overlay to ensure text is readable -->
        <div class="absolute inset-0 bg-red-60 bg-opacity-60"></div>

        <div class="container mx-auto px-4 flex flex-col md:flex-row items-center relative z-10">
            <div class="md:w-2/3 mb-8 md:mb-0">
                <h1 class="text-4xl md:text-5xl font-bold mb-4">Donate Blood, Save Lives</h1>
                <p class="text-xl mb-6">Connect with blood donors and recipients in your area. Every donation can save
                    up to three lives.</p>
                <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4">
                    <a href="register.html" id="become-donor-btn"
                        class="bg-white text-red-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 text-center">Become
                        a Donor</a>
                    <a href="donation-centers.html" id="donate-now-btn"
                        class="border-2 border-white text-white px-6 py-3 rounded-lg font-semibold hover:bg-red-700">Donate
                        Now</a>
                </div>
            </div>
        </div>
    </section>



    <!-- Statistics Section -->
    <section class="py-16 bg-white">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-center mb-12">Making a Difference Together</h2>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="text-center p-6 bg-gray-50 rounded-lg shadow-sm">
                    <div class="text-red-600 text-4xl font-bold mb-2">
                        <span id="donor-count" class="counter">0</span>+
                    </div>
                    <p class="text-gray-700">Registered Donors</p>
                </div>

                <div class="text-center p-6 bg-gray-50 rounded-lg shadow-sm">
                    <div class="text-red-600 text-4xl font-bold mb-2">
                        <span id="donation-count" class="counter">0</span>+
                    </div>
                    <p class="text-gray-700">Successful Donations</p>
                </div>

                <div class="text-center p-6 bg-gray-50 rounded-lg shadow-sm">
                    <div class="text-red-600 text-4xl font-bold mb-2">
                        <span id="lives-saved" class="counter">0</span>+
                    </div>
                    <p class="text-gray-700">Lives Saved</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Emergency Requests Section -->
    <section class="py-16 bg-gray-50">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-center mb-4">Emergency Requests</h2>
            <p class="text-center text-gray-600 mb-12">These requests need immediate attention. Can you help?</p>

            <div id="emergency-requests" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Emergency requests will be loaded here via JavaScript -->
                <div class="p-6 bg-white rounded-lg shadow-sm border-l-4 border-red-600">
                    <div class="flex justify-between items-start">
                        <div>
                            <span
                                class="inline-block px-2 py-1 bg-red-100 text-red-800 rounded text-sm font-semibold mb-2">Critical</span>
                            <h3 class="font-bold text-lg mb-1">A+ Blood Needed</h3>
                            <p class="text-gray-600 mb-2">City Hospital, New Delhi</p>
                        </div>
                        <span class="text-sm text-gray-500">2 hours ago</span>
                    </div>
                    <p class="mb-4">Patient needs 2 units for emergency surgery.</p>
                    <a href="requests.html" class="text-red-600 font-semibold hover:text-red-700">View Details →</a>
                </div>

                <!-- More emergency request examples -->
                <div class="p-6 bg-white rounded-lg shadow-sm border-l-4 border-orange-500">
                    <div class="flex justify-between items-start">
                        <div>
                            <span
                                class="inline-block px-2 py-1 bg-orange-100 text-orange-800 rounded text-sm font-semibold mb-2">High</span>
                            <h3 class="font-bold text-lg mb-1">O- Blood Needed</h3>
                            <p class="text-gray-600 mb-2">Apollo Hospital, Mumbai</p>
                        </div>
                        <span class="text-sm text-gray-500">5 hours ago</span>
                    </div>
                    <p class="mb-4">Accident victim needs 3 units urgently.</p>
                    <a href="requests.html" class="text-red-600 font-semibold hover:text-red-700">View Details →</a>
                </div>
            </div>

            <div class="text-center mt-8">
                <a href="requests.html"
                    class="inline-block bg-red-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-red-700">View
                    All Requests</a>
            </div>
        </div>
    </section>

    <!-- How It Works Section -->
    <section class="py-16 bg-white">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-center mb-12">How It Works</h2>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="text-center">
                    <div
                        class="bg-red-100 text-red-600 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold mb-2">Register</h3>
                    <p class="text-gray-600">Create an account with your blood type and location details.</p>
                </div>

                <div class="text-center">
                    <div
                        class="bg-red-100 text-red-600 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold mb-2">Get Notified</h3>
                    <p class="text-gray-600">Receive alerts when your blood type is needed in your area.</p>
                </div>

                <div class="text-center">
                    <div
                        class="bg-red-100 text-red-600 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold mb-2">Donate</h3>
                    <p class="text-gray-600">Save lives by donating blood when and where it's needed most.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonials Section -->
    <section class="py-16 bg-gray-50">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-center mb-12">What People Say</h2>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="bg-white p-6 rounded-lg shadow-sm">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 bg-gray-200 rounded-full overflow-hidden mr-4">
                            <img src="assets/images/medical.png" alt="Testimonial" class="w-full h-full object-cover">
                        </div>
                        <div>
                            <h4 class="font-bold">Rahul Sharma</h4>
                            <p class="text-gray-600 text-sm">Blood Donor</p>
                        </div>
                    </div>
                    <p class="text-gray-700">"I've been donating blood for years, but BloodConnect made it so much
                        easier to find where my blood type is needed. The notifications are timely and the process is
                        seamless."</p>
                </div>

                <div class="bg-white p-6 rounded-lg shadow-sm">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 bg-gray-200 rounded-full overflow-hidden mr-4">
                            <img src="assets/images/halloween.png" alt="Testimonial" class="w-full h-full object-cover">
                        </div>
                        <div>
                            <h4 class="font-bold">Priya Patel</h4>
                            <p class="text-gray-600 text-sm">Recipient</p>
                        </div>
                    </div>
                    <p class="text-gray-700">"When my father needed blood urgently, I didn't know where to turn.
                        BloodConnect helped us find donors within hours. I'm forever grateful for this platform."</p>
                </div>

                <div class="bg-white p-6 rounded-lg shadow-sm">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 bg-gray-200 rounded-full overflow-hidden mr-4">
                            <img src="assets/images/medical.png" alt="Testimonial" class="w-full h-full object-cover">
                        </div>
                        <div>
                            <h4 class="font-bold">Dr. Anil Kumar</h4>
                            <p class="text-gray-600 text-sm">Hospital Staff</p>
                        </div>
                    </div>
                    <p class="text-gray-700">"As a medical professional, I've seen how critical timely blood donations
                        can be. BloodConnect has been a valuable resource for connecting our patients with willing
                        donors."</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Add an ID to the CTA section -->
    <section id="cta-section" class="py-16 bg-red-600 text-white">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-3xl font-bold mb-6">Ready to Make a Difference?</h2>
            <p class="text-xl mb-8 max-w-2xl mx-auto">Join our community of donors and recipients today. Your
                contribution can save lives.</p>
            <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4">
                <a href="register.html"
                    class="bg-white text-red-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100">Register Now</a>
                <a href="about.html"
                    class="border-2 border-white text-white px-6 py-3 rounded-lg font-semibold hover:bg-red-700">Learn
                    More</a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4">BloodConnect</h3>
                    <p class="text-gray-400">Connecting blood donors with recipients since 2025. Our mission is to
                        ensure that no one suffers due to blood shortage.</p>
                </div>

                <div>
                    <h4 class="font-bold mb-4">Quick Links</h4>
                    <ul class="space-y-2">
                        <li><a href="index.html" class="text-gray-400 hover:text-white">Home</a></li>
                        <li><a href="donors.html" class="text-gray-400 hover:text-white">Donors</a></li>
                        <li><a href="requests.html" class="text-gray-400 hover:text-white">Requests</a></li>
                        <li><a href="about.html" class="text-gray-400 hover:text-white">About Us</a></li>
                        <li><a href="faq.html" class="text-gray-400 hover:text-white">FAQ</a></li>
                    </ul>
                </div>

                <div>
                    <h4 class="font-bold mb-4">Contact Us</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li class="flex items-start">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 mt-0.5" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                            </svg>
                            <span>D-53, Ronak Enclave, Agra, India</span>
                        </li>
                        <li class="flex items-start">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 mt-0.5" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                            </svg>
                            <span>info@bloodconnect.org</span>
                        </li>
                        <li class="flex items-start">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 mt-0.5" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                            </svg>
                            <span>+91 9105534307</span>
                        </li>
                    </ul>
                </div>

                <div>
                    <h4 class="font-bold mb-4">Follow Us</h4>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                    d="M22.675 0h-21.35c-.732 0-1.325.593-1.325 1.325v21.351c0 .731.593 1.324 1.325 1.324h11.495v-9.294h-3.128v-3.622h3.128v-2.671c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.795.143v3.24l-1.918.001c-1.504 0-1.795.715-1.795 1.763v2.313h3.587l-.467 3.622h-3.12v9.293h6.116c.73 0 1.323-.593 1.323-1.325v-21.35c0-.732-.593-1.325-1.325-1.325z" />
                            </svg>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                    d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723 10.054 10.054 0 01-3.127 1.184 4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z" />
                            </svg>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                    d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z" />
                            </svg>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor"
                                viewBox="0 0 24 24">
                                <path
                                    d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z" />
                            </svg>
                        </a>
                    </div>
                </div>
            </div>

            <div class="mt-8 pt-8 border-t border-gray-700 text-center text-gray-400">
                <p>&copy; 2025 BloodConnect. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Toast Container -->
    <div id="toast-container" class="fixed bottom-4 right-4 z-50"></div>

    <script src="assets/js/config.js"></script>
    <script src="assets/js/utils/toast.js"></script>
    <script src="assets/js/services/api.js"></script>
    <script src="assets/js/services/auth.js"></script>
    <script src="assets/js/utils/authcheck.js"></script>
    <script src="assets/js/main.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const api = new API(API_URL);
            class IndexPage {
                constructor() {
                    this.api = api;
                    this.becomeDonorBtn = document.getElementById('become-donor-btn');
                    this.emergencyRequestsContainer = document.getElementById('emergency-requests');
                    this.viewAllRequestsBtn = document.querySelector('a[href="requests.html"]');
                    this.ctaSection = document.getElementById('cta-section');
                    this.init();
                }

                init() {
                    this.updateDonorButton();
                    this.fetchStatistics();
                    this.fetchEmergencyRequests();
                    this.setupEventListeners();
                    this.initCounters();
                    this.toggleCtaSection();
                }
                toggleCtaSection() {
                    // Hide CTA section if user is authenticated
                    if (this.ctaSection && authService.isAuthenticated()) {
                        this.ctaSection.classList.add('hidden');
                    }
                }
                updateDonorButton() {
                    // Check if user is logged in
                    if (authService.isAuthenticated()) {
                        const user = authService.getCurrentUser();
                        // Update button to go to profile if user is logged in
                        if (this.becomeDonorBtn) {
                            this.becomeDonorBtn.href = 'profile.html';
                            this.becomeDonorBtn.textContent = 'My Profile';
                        }
                    }
                }

                setupEventListeners() {
                    // Add event listener for "View All Requests" button
                    if (this.viewAllRequestsBtn && !authService.isAuthenticated()) {
                        this.viewAllRequestsBtn.addEventListener('click', (e) => {
                            e.preventDefault();
                            toast.info('Please login to view all blood requests');
                            setTimeout(() => {
                                window.location.href = 'login.html?redirect=' + encodeURIComponent('requests.html');
                            }, 1500);
                        });
                    }
                }

                async fetchStatistics() {
                    try {
                        const data = await api.get('/api/stats');
                        // Update counters with real data
                        this.animateCounter('donor-count', data.donorCount || 250);
                        this.animateCounter('donation-count', data.donationCount || 500);
                        this.animateCounter('lives-saved', data.livesSaved || 1500);
                    } catch (error) {
                        console.error('Error fetching stats:', error);
                        // Use default values if API fails
                        this.animateCounter('donor-count', 250);
                        this.animateCounter('donation-count', 500);
                        this.animateCounter('lives-saved', 1500);
                    }
                }

                async fetchEmergencyRequests() {
                    try {
                        const data = await api.get('/api/requests?urgency=high&limit=3');

                        if (data.requests && data.requests.length > 0) {
                            if (this.emergencyRequestsContainer) {
                                this.emergencyRequestsContainer.innerHTML = ''; // Clear placeholder

                                data.requests.forEach(request => {
                                    const timeAgo = this.getTimeAgo(new Date(request.createdAt));
                                    const urgencyClass = request.urgency === 'critical' ? 'red' : 'orange';

                                    this.emergencyRequestsContainer.innerHTML += `
                    <div class="p-6 bg-white rounded-lg shadow-sm border-l-4 border-${urgencyClass}-600">
                      <div class="flex justify-between items-start">
                        <div>
                          <span class="inline-block px-2 py-1 bg-${urgencyClass}-100 text-${urgencyClass}-800 rounded text-sm font-semibold mb-2">${request.urgency.charAt(0).toUpperCase() + request.urgency.slice(1)}</span>
                          <h3 class="font-bold text-lg mb-1">${request.patient?.bloodType || 'Unknown'} Blood Needed</h3>
                          <p class="text-gray-600 mb-2">${request.hospital?.name || 'Unknown'}, ${request.hospital?.city || 'Unknown'}</p>
                        </div>
                        <span class="text-sm text-gray-500">${timeAgo}</span>
                      </div>
                      <p class="mb-4">${request.description || `Patient needs ${request.unitsNeeded} units.`}</p>
                      <a href="requests.html?id=${request._id}" class="text-red-600 font-semibold hover:text-red-700">View Details →</a>
                    </div>
                  `;
                                });
                            }
                        }
                    } catch (error) {
                        console.error('Error fetching emergency requests:', error);
                        if (this.emergencyRequestsContainer) {
                            this.emergencyRequestsContainer.innerHTML = `
                <div class="col-span-1 md:col-span-2 lg:col-span-3 p-6 bg-white rounded-lg text-center">
                  <p class="text-gray-600">Unable to load emergency requests. Please try again later.</p>
                </div>
              `;
                        }
                    }
                }

                initCounters() {
                    // Initialize counter elements if they exist
                    const counterElements = document.querySelectorAll('.counter');
                    if (counterElements.length === 0) {
                        return;
                    }
                }

                // Counter animation function
                animateCounter(id, target) {
                    const counter = document.getElementById(id);
                    if (!counter) return;

                    const duration = 2000; // 2 seconds
                    const steps = 50;
                    const stepTime = duration / steps;
                    const increment = target / steps;
                    let current = 0;

                    const timer = setInterval(() => {
                        current += increment;
                        counter.textContent = Math.floor(current);

                        if (current >= target) {
                            counter.textContent = target;
                            clearInterval(timer);
                        }
                    }, stepTime);
                }

                // Time ago helper function
                getTimeAgo(date) {
                    const seconds = Math.floor((new Date() - date) / 1000);

                    let interval = seconds / 31536000;
                    if (interval > 1) return Math.floor(interval) + " years ago";

                    interval = seconds / 2592000;
                    if (interval > 1) return Math.floor(interval) + " months ago";

                    interval = seconds / 86400;
                    if (interval > 1) return Math.floor(interval) + " days ago";

                    interval = seconds / 3600;
                    if (interval > 1) return Math.floor(interval) + " hours ago";

                    interval = seconds / 60;
                    if (interval > 1) return Math.floor(interval) + " minutes ago";

                    return Math.floor(seconds) + " seconds ago";
                }
            }

            // Initialize the index page
            new IndexPage();
        });

        // Add event listener to Donate Now button
        const donateNowBtn = document.getElementById('donate-now-btn');
        if (donateNowBtn) {
            donateNowBtn.addEventListener('click', (e) => {
                e.preventDefault();
                if (authService.isAuthenticated()) {
                    window.location.href = 'donation-centers.html';
                } else {
                    toast.warning('Please log in to access donation centers');
                    setTimeout(() => {
                        window.location.href = 'login.html?redirect=' + encodeURIComponent('donation-centers.html');
                    }, 1500);
                }
            });
        }
        // Check if there's a redirect parameter in the URL
        const urlParams = new URLSearchParams(window.location.search);
        const redirectUrl = urlParams.get('redirect');

        // Store the redirect URL in localStorage if it exists
        if (redirectUrl) {
            localStorage.setItem('redirectAfterLogin', redirectUrl);
        }

        // In the login success handler
        function handleLoginSuccess() {
            const redirectUrl = localStorage.getItem('redirectAfterLogin');
            if (redirectUrl) {
                localStorage.removeItem('redirectAfterLogin');
                window.location.href = redirectUrl;
            } else {
                window.location.href = 'index.html';
            }
        }
        // Handle donation centers link clicks
        const donationCentersLink = document.getElementById('donation-centers-link');
        const mobileDonationCentersLink = document.getElementById('mobile-donation-centers-link');

        const handleDonationCentersClick = (e) => {
            e.preventDefault();
            if (authService.isAuthenticated()) {
                window.location.href = 'donation-centers.html';
            } else {
                toast.warning('Please log in to access donation centers');
                setTimeout(() => {
                    window.location.href = 'login.html?redirect=' + encodeURIComponent('donation-centers.html');
                }, 1500);
            }
        };

        if (donationCentersLink) {
            donationCentersLink.addEventListener('click', handleDonationCentersClick);
        }

        if (mobileDonationCentersLink) {
            mobileDonationCentersLink.addEventListener('click', handleDonationCentersClick);
        }


    </script>


</body>

</html>